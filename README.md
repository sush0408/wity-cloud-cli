# Wity Cloud CLI

**Wity Cloud CLI** is an open-source tool built by **[wityliti.io](https://wityliti.io)** to streamline the deployment, debugging, and monitoring of Kubernetes clusters‚Äîboth on-prem and in hybrid cloud environments. This AI-augmented CLI provides a full-stack orchestration experience across networking, storage, observability, and multi-cloud integrations.

## üöÄ Why Wity Cloud CLI?

Wity Cloud CLI is purpose-built for:

* **Bare-metal Kubernetes clusters** (e.g., Hetzner, physical nodes)
* **AI-first DevOps workflows**
* Seamless **S3, ECR, Route53** integrations with AWS
* **Multi-namespace service readiness checks, logs, health reports, and TLS automation**
* Full support for **RKE2**, **Longhorn**, **Traefik**, **Cilium**, **Rancher**, and **KubeVirt**

## üéØ Key Features

- **üöÄ One-Command Deployment**: Complete stack deployment with single commands
- **üîß Modular Architecture**: Deploy individual components or complete stacks
- **üìä Enterprise Monitoring**: Integrated PMM, Prometheus, Grafana, and Loki
- **üóÑÔ∏è Production Databases**: Operator-based MongoDB, PostgreSQL, MySQL, Redis
- **üîÑ GitOps Ready**: ArgoCD integration for continuous deployment
- **‚òÅÔ∏è Cloud Native**: AWS integration, backup solutions, certificate management
- **üõ†Ô∏è Intelligent Troubleshooting**: Automated diagnostics and conflict resolution
- **ü§ñ AI-Powered**: kubectl-ai integration for intelligent cluster management
- **üìö Comprehensive Documentation**: Detailed guides and troubleshooting resources
- **üîí HTTPS Automation**: Automated Let's Encrypt certificates for all services

## üöÄ Quick Start

### Prerequisites

- **OS**: Ubuntu/Debian-based system (tested on Ubuntu 24.04)
- **Resources**: Minimum 4GB RAM, 20GB disk space (8GB+ RAM recommended for full stack)
- **Access**: Root privileges or sudo access
- **Network**: Internet connectivity for component downloads

### Installation

```bash
# Clone the repository
git clone https://github.com/wityliti/wity-cloud-cli.git
cd wity-cloud-cli

# Make executable and run
chmod +x wity-cloud-cli.sh
sudo ./wity-cloud-cli.sh
```

### Quick Deployment

```bash
# 1. System preparation
sudo ./check-dependencies.sh

# 2. Deploy Kubernetes core
sudo ./core.sh

# 3. Deploy complete database stack
sudo ./percona-mongodb-deploy.sh

# 4. Add CI/CD pipeline
sudo ./cicd.sh
```

## üèóÔ∏è Architecture Overview

### Core Infrastructure Stack

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Wity Cloud CLI                           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Applications & CI/CD                                       ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ ArgoCD (GitOps)                                       ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Sample Applications                                    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ Custom Workloads                                      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Monitoring & Observability                                ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ PMM Server (Database Monitoring)                      ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Prometheus + Grafana                                  ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Loki (Log Aggregation)                               ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ AlertManager                                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Database Layer                                            ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Percona MongoDB (Sharded Cluster)                    ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ PostgreSQL (HA)                                      ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ MySQL/MariaDB                                        ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ Redis                                                ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Networking & Security                                     ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Traefik/Nginx Ingress                               ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ MetalLB (Load Balancer)                             ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ cert-manager (TLS)                                   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ Cilium CNI                                           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Kubernetes Platform                                       ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ RKE2 (Lightweight Kubernetes)                        ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Helm (Package Manager)                               ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ kubectl + kubectl-ai                                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Infrastructure                                            ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Ubuntu 24.04 LTS                                     ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Optimized Kernel Parameters                          ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ Enhanced Security Settings                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üì¶ Component Matrix

### Core Infrastructure

| Component | Script | Status | Description |
|-----------|--------|--------|-------------|
| **RKE2 Kubernetes** | `core.sh` | ‚úÖ Production Ready | Lightweight K8s with enhanced security |
| **Cilium CNI** | `core.sh` | ‚úÖ Auto-Conflict Resolution | eBPF-based networking with conflict detection |
| **Helm** | `core.sh` | ‚úÖ Latest Version | Package manager with repository management |
| **MetalLB** | `core.sh` | ‚úÖ Configured | Load balancer for bare metal deployments |
| **cert-manager** | `core.sh` | ‚úÖ Let's Encrypt Ready | Automated certificate management |

### Database Solutions

| Database | Deployment Method | Features | Status |
|----------|------------------|----------|--------|
| **Percona MongoDB** | Operator-based | Sharding, PMM monitoring, automated backups | ‚úÖ Production Ready |
| **PostgreSQL** | Helm chart | High availability, persistent storage | ‚úÖ Stable |
| **MySQL** | Helm chart | Replication, backup support | ‚úÖ Stable |
| **Redis** | Helm chart | Clustering, persistence | ‚úÖ Stable |
| **MariaDB** | Helm chart | Galera clustering | ‚úÖ Stable |

### CI/CD & GitOps

| Component | Purpose | Access | Status |
|-----------|---------|--------|--------|
| **ArgoCD** | GitOps continuous deployment | Web UI + CLI | ‚úÖ Production Ready |
| **ArgoCD CLI** | Command-line management | `argocd` command | ‚úÖ Installed |
| **Projects** | Multi-environment management | Development/Production projects | ‚úÖ Configured |
| **Applications** | Sample deployments | MongoDB, Monitoring apps | ‚úÖ Templates Ready |

## üõ†Ô∏è Script Reference

### Main Scripts

| Script | Purpose | Key Functions |
|--------|---------|---------------|
| `main.sh` | Central orchestrator | Menu-driven deployment, status checks |
| `core.sh` | Kubernetes infrastructure | RKE2, networking, ingress, storage |
| `databases.sh` | Database deployments | All database types with monitoring |
| `monitoring.sh` | Observability stack | Prometheus, Grafana, Loki, PMM |
| `cicd.sh` | CI/CD pipeline | ArgoCD, projects, applications |
| `percona-mongodb-deploy.sh` | Complete MongoDB stack | Operator, cluster, monitoring, backups |

### Utility Scripts

| Script | Purpose | Key Features |
|--------|---------|--------------|
| `check-dependencies.sh` | System preparation | Package installation, system optimization |
| `troubleshoot.sh` | Diagnostics & repair | Automated conflict resolution, health checks |
| `common.sh` | Shared functions | Logging, error handling, utilities |
| `aws.sh` | Cloud integration | AWS CLI, credentials, S3 setup |

## üîê Security & Access

### Default Credentials

| Service | Username | Password | Access Method |
|---------|----------|----------|---------------|
| **ArgoCD** | `admin` | Auto-generated | Check deployment output |
| **MongoDB** | `databaseAdmin` | `databaseAdmin123456` | Port-forward 27017 |
| **PMM Server** | `admin` | `admin-password` | Port-forward 8080 |
| **Grafana** | `admin` | `prom-operator` | Port-forward 3000 |

> ‚ö†Ô∏è **Security Notice**: Change all default passwords in production environments!

## üö® Troubleshooting

### Automated Diagnostics

```bash
# Run comprehensive diagnostics
sudo ./troubleshoot.sh

# Quick health check
sudo ./troubleshoot.sh
# Select "System Health Check"

# Fix common conflicts
sudo ./troubleshoot.sh
# Select "Fix Cilium Conflicts"
```

## ü§ù Contributing

We welcome contributions from the community! Please see our [Contributing Guidelines](CONTRIBUTING.md) for details.

### Quick Start for Contributors

```bash
# Fork the repository
git clone https://github.com/your-username/wity-cloud-cli.git
cd wity-cloud-cli

# Create feature branch
git checkout -b feature/your-feature

# Make your changes and test
sudo ./test/run-tests.sh

# Submit pull request
```

## üìö Documentation

Comprehensive documentation is available in the `docs/` folder:

- **[Architecture Guide](docs/README.md)** - Detailed system architecture
- **[Percona MongoDB Guide](docs/PERCONA_MONGODB_README.md)** - Database deployment guide
- **[kubectl-ai Integration](docs/kubectl.ai.md)** - AI-powered Kubernetes management
- **[Troubleshooting Guide](docs/IMPROVEMENTS.md)** - Common issues and solutions

## üìÑ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## üÜò Support

### Getting Help

1. **Documentation**: Check the `docs/` folder
2. **Issues**: Open an issue on GitHub
3. **Discussions**: Join our community discussions
4. **Automated Diagnostics**: Run `sudo ./troubleshoot.sh`

### Reporting Issues

When reporting issues, please include:

- Output from `sudo ./troubleshoot.sh` (option 5: Collect System Information)
- System specifications (OS, RAM, disk space)
- Deployment steps taken
- Error messages and logs

## üåü Community

- **GitHub**: [https://github.com/wityliti/wity-cloud-cli](https://github.com/wityliti/wity-cloud-cli)
- **Website**: [https://wityliti.io](https://wityliti.io)
- **Documentation**: [https://docs.wityliti.io](https://docs.wityliti.io)

## üéØ Project Status

**Current Version**: 2.0.0
**Status**: Production Ready
**Last Updated**: May 2025

### Recent Achievements

- ‚úÖ Resolved ArgoCD ingress conflicts
- ‚úÖ Implemented intelligent Cilium conflict resolution
- ‚úÖ Added comprehensive troubleshooting automation
- ‚úÖ Enhanced MongoDB operator integration
- ‚úÖ Improved documentation and user experience
- ‚úÖ Added batch mode for automated deployments

### Roadmap

- üîÑ Enhanced security hardening
- üîÑ Multi-cluster management
- üîÑ Advanced backup strategies
- üîÑ Performance optimization tools
- üîÑ Extended cloud provider support

---

**Built with ‚ù§Ô∏è by [wityliti.io](https://wityliti.io) for the Kubernetes community**

*Wity Cloud CLI - Making enterprise Kubernetes accessible to everyone* 